---
title: "chas-data"
author: "Eric Mai"
date: "1/18/2022"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Data Sources


## Data Collection

```{r}
library(tidyverse)
library(httr)
library(glue)

years <- 2012:2018

sumlev <- "050"

dir.create(glue("{sumlev}"))

walk(years, ~{
  
  url <- glue("https://www.huduser.gov/PORTAL/datasets/cp/{.x - 4}thru{.x}-{sumlev}-csv.zip")
  
  file <- basename(url)
  
  path <- file.path(sumlev, file)
  
  if (!file.exists(path)) {
    GET(url, write_disk(path, overwrite = TRUE), progress(type = "down"))
  }
  
  print(glue("Unzipping {.x}..."))
  unzip(path, exdir = file.path(sumlev, .x))
  
})
```

